# Описание

    Программа для смены кассиров в ref server для работы с 2мя фр.
    Подключается через xml интерфейс.
    настройки пишутся в .env файл

# Как использовать

    Для работы необходимо подготовить заранее .env файлы. Ниже будет описание структуры.

## Предварительные настройки RK7

-   Первым делом нужно создать в группе кассиров двух работников "Кассир ООО" и "Кассир ИП".
-   Заполнить поля "официальная должность и ФИО" "ИНН работника"
-   Скопировать Ident роли в env файлы
-   Настроить xml интерфейс у сервера справочников.
-   Назначить права "HTTP Access" серверу справочников и пользователю который будет использоватся для подключения
-   Назначить кассиров у фискальных регистраторов в универсальном драйвере (нач. с 7.6.5+)

## Настройка ПК

-   Для работы нужен или docker или компьютер с nodeJS.
-   для установки nodeJS под win10 достаточно скачать nodeJS с оф. сайта.
-   Если компьютер win7-win8 то необходимо установить более раннюю версию nodeJS посмтреть можно в гугл.

## Настройка env файлов

-   заполнить порт (RK7_PORT)
-   заполнить адрес сервера справочников (RK7_REF)
-   заполнить Имя пользователя с правами "Http Access" (RK7_LOGIN)
-   заполнить Пароль пользователя с правами "Http Access" (RK7_PASSWORD)
-   заполнить Индентификатор роли где находятся кассиры (MAINPARENTIDENT)

После чего перейти в директорию и запустить комманду
"npm i && npm run build && npm run start"
Программа будет запущена на 3000 порту.
Проверить открывается ли приложение на 3000 порту.

# Докеризация

Команда для сборки контейнейра

## Сборка

-   docker build . -tworker-changer-app

## Запуск

-   docker run -p 3000:3000 worker-changer-app

## ENV

    Описание структуры

    должно быть 3 файла ".env", ".env.local", ".env.production"

    RK7_PORT=порт xml ref сервера
    RK7_REF=ip адрес где запущен ref сервер (192.168.1.2)

    RK7_URL = https://$RK7_REF:$RK7_PORT/rk7api/v0/xmlinterface.xml - не меняем это конструкор url
    RK7_LOGIN= тут указываем Имя пользователя с правами "HTTP Access" ('User')
    RK7_PASSWORD=тут указываем Пароль пользователя с правами "HTTP Access" ('1234567')
    MAINPARENTIDENT= тут указываем Ident роли кассиров из справочников пользователей
